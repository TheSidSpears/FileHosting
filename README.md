Реализовать
-борьба с загрузкой HTML-файла: можно загружать файлы на отдельный от основного домен, можно при скачивании выставлять правильные заголовки, которые заставят браузер скачать файл, а не открыть его как веб-страницу (Content-Disposition: attachment, Content-Type не содержащий text/html)


-переименовывание обратно из name в original_name при отгрузке файла пользователю
-кнопка удалить файл
-нормализовать getId3
-routes: $file и $fileObject нормализовать



Реализую загрузку файлов с сервера. Сейчас у меня так: показать download.html с Location -> location перенаправляет на файл и он открывается в браузере.
Хочу: ф-ия возвращает не проходной и ненужный download.html, а сразу файл, в http Header которого будет прописан 'Content-Disposition':'attachment' И который будет загружаться.

Как это можно реализовать? 


разу посоветую получение пути к файлу вынести в отдельный метод.

Также, если ты выдаешь заголовок location, то непонятно зачем рендерить download.html, так как пользователь эту страницу скорее всего не увидит.

Также, заголовок content-dispoistion должен отдаваться не со страницей, а вместе с файлом. У тебя же (если убрать location) он приведет к тому что браузер сохранит саму HTML страницу.

> Хочу: ф-ия возвращает не проходной и ненужный download.html, а сразу файл, в http Header которого будет прописан 'Content-Disposition':'attachment' И который будет загружаться.
> Как это можно реализовать?

Ну самый простой способ это прочитать file_get_contents файл в переменную и вывести через усрщ (после заголовков). Но это требует загрузить файл целиком в память, а echo не совсем соответствует идеям Слима.

Вот тут http://www.slimframework.com/docs/objects/response.html#the-response-body написано как можно задать, чтобы тело ответа читалось бы из файла постепенно.

Ну и если еще оптимизировать, то хорошо бы отдавать файлы без особого участия PHP. Для этого надо настроить веб-сервер, например в случае Апача можно использовать расширение X-Sendfile. С ним PHP только отдает заголовок с именем файла и завершается, а веб-сервер уже дальеш отдает файл. Или пойти еще дальше и настроить правила в .htaccess так, чтобы файл отдавался по ссылке сразу вообще без обращения к PHP.





Я практически ничего не вынес из твоего ответа, поэтому начнём с малого.
Есть код http://ideone.com/B77xqx . Из него нужно убрать $this->view->render($response, 'download.html', $args), потому что мне вообще не нужно никакую web-страницу возвращать. во всех примерах в get в return прописано рендерить страницу, и я не знаю как туда можно прописать что-то еще
А возвращать он должен файл (бог с ней, с закачкой пока)

Как? 





> о всех примерах в get в return прописано рендерить страницу
Надо не только смотреть примеры, а надо разбираться как именно работает фреймворк. Ты не обязан вызывать render, и нигде такого не написано. Обработчик просто должен сформировать HTTP-ответ в объекте $response и вернуть его.

Также, надо немного представлять как работает протокол HTTP.

Вот теперь подумай, какой HTTP-ответ должен получиться и как его сформировать в объекте $response. То есть надо задать нужные заголовки (как минимум задающие тип содержимого и то, что это файл для скачивания), а в качестве тела ответа передать содержимое файла.

Изучи код или документацию объекта Response в Слиме.

В моем посте было написано несколько вариантов, как это сделать, начиная с наименее оптимального способа.

Есть есть еще какие-то конкретные вопросы, задавай.